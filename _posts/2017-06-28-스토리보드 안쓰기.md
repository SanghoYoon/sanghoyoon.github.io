---
layout: post
title: "스토리보드 안 쓰기"
description: "AppDelegate를 통해 스토리보드를 쓰지 않고도 원하는 화면을 출력해봅니다"
og_image:
tags: [ios, ]
comments: true
---
### 왜 스토리보드를 안 쓰는데?
![](../assets/documentation/2017-06-28-NotUsingStoryboard/스크린샷 2017-06-28 오후 5.30.44.png)

다른 사람들은 UI를 구성할 때 어떤 식으로 할까. [페이스북 그룹](https://www.facebook.com/groups/swiftkor/)에서 있었던 설문조사를 보면 압도적으로 Storyboard를 사용하여 UI를 구성하고 있었습니다. (사진보면 알겠지만 나도 Storyboard를 사용한다고 투표했다) 예상보다 너무 많아서 조금 당황스러웠지만, 생각해보면 최근 iOS 입문을 대체로 Storyboard와 함께 배우고 있으니 당연하기도 하죠.

혹자는 "스토리보드라는 훌륭한 걸 냅두고 왜..? 코드로 짜요?!" 반문할 수 있습니다. 눈만 있어도 앱이 어떤 흐름으로 구성되는지 직관적으로 파악할 수 있고, 사전지식이 없어도 쉽게 UI를 구성할 수 있고, UI 구성뿐만 아니라 Action까지 지정해줄 수 있으니 말이죠. 이러한 이점에도 불구하고 쓰지 않는 이유는 이 Storyboard를 이용하여 **협업** 을 해봤다면 쉽게 느낄 수 있습니다.

> "저 건든 거 없는데 Merge Conflict가 나요!"

각기 다양한 이유로 Storyboard를 지양하고 있는데, 그 중에서 제가 직접 느꼈던 문제들을 공유하고자 합니다.

1. **View가 많아지면 무겁고 느려지는 문제**
	- XCode가 뻗는 일이 종종 있습니다.
1. **UI에 대한 속성을 Storyboard와 Code, 두 군데에서 설정하는 문제**
	- 가끔 Storyboard 상에서 UI에 대한 몇가지의 속성을 제공하지 않는 경우가 있는데, 결국 이를 해결하려면 Code를 통해 설정해주어야 합니다. 결국 View에 대한 내용을 두 군데에서 체크해줘야 하니 이 얼마나 낭비입니까.
1. **협업 시 Conflict 문제**
	- 지금은 어떨지 모르겠지만, Scene의 자리만 옮겨줘도 Merge 시 Conflict가 나는 경우가 있습니다. Conflict 나면 그 부분을 수정해야 하는데 이 모든 게 또 결국 Storyboard를 구성하는 XML을 보고 일일이 수정해야만 하죠. 한번 경험해보면 알겠지만 정말 토악질 나옵니다 -_-


그 외 다른 이유는 [Why I Don’t Use Storyboard](https://blog.bobthedeveloper.io/why-i-dont-use-storyboard-fe14a1a99f58) 를 참고해봅니다.

제가 내린 결론은 이렇습니다. Storyboard의 장점은 타 플랫폼과 비교했을 때 독보적이긴 합니다. 그러나 이 때문에 파생되는 여러 문제들이 있었습니다. Storyboard로 UI를 구성해도 결국 종착역은 Code로 해결해야 했기에 그럴 바엔 차라리 Code로 하는 것이 좋다고 판단했죠. Storyboard 특유의 편리성은 잃겠지만 말입니다.

### 그러면 스토리보드 없이 해보자!
저같은 초심자를 위해 일단 오늘은 Project 내 `Main.storyboard`가 없이도 오류 없이 실행되는 단계까지만 가볍게 가보도록 합니다.

#### Step 1. 프로젝트 생성하기
제일 첫 번째는 바로 프로젝트를 생성하는 것입니다. `Single View Application`과 `Swift`를 선택해줍니다. 참고로 Swift의 버전은 3입니다.

#### Step 2. 과감하게 스토리보드 삭제하기
조금은 떨리고, 아주 조금은 무섭겠지만 이제 Storyboard의 굴레에서 벗어나 신세계로 떠나기 위해 과감하게 `Main.storyboard`를 삭제해볼까요? 그리고 확실하게 결별한다고 이야기해줍시다.

왼쪽에 있는 *Project Navigator* 에서 프로젝트명을 클릭하고, *General* > *Deployment Info* > *Main Interface* 에 Main이라고 쓰여 있는 부분을 비워둡니다.

한번 실행해볼까요! 검은 화면만 떠있을 겁니다.
![](../assets/documentation/2017-06-28-NotUsingStoryboard/Simulator Screen Shot 2017. 6. 28. 오후 5.42.52.png)

#### Step 3. Delegate 설정하기
왜 검은 화면이 나왔을까? 그 해답은 `AppDelegate.swift`에 있습니다. 우리는 지금까지 단순히 Storyboard만을 삭제했을 뿐, 이제 어떻게 뷰를 보여줄 것인지를 설정해주지 않았습니다.

##### Delegation Pattern
iOS 애플리케이션의 구조에 대해서 잠깐 언급하고 넘어갑니다. 일반적으로 **디자인패턴**(Design Pattern)이라고 알고 있는 여러 가지 방법론 중에서 iOS는 크게 **MVC**, **Delegation**, **SubClassing**, **Target-Action** 으로 구조화 되어있습니다. 일단 다른 건 나중에 보기로 하고 이중에서 **Delegation**패턴을 보겠습니다.

Swift는 다중상속을 지원하지 않습니다. 그럼에도 다중상속은 아니지만, 다중상속을 한 듯한 효과를 줄 수 있는데 바로 이것이 **Delegation** 입니다.
이 친구의 역할은 **대표자**라는 뜻의 **Delegate** 단어에서도 느껴볼 수 있듯, **Delegation** 은 객체가 하나 또는 여러 개의 작업 수행을 다른 객체에게 **위임**하는 것인데, 바로 단적인 예가 우리가 마주한 `AppDelegate`입니다.

`UIApplication` 클래스는 iOS에서 앱을 **관리**하고 **작동**하게 하는 역할을 합니다. 그래서 모든 iOS 앱은 단 하나의 인스턴스를 가지고 있어야 합니다. UIApplication 객체는 대부분을 백그라운드에서 작업하는데, 앱의 **LifeCycle**이 이에 해당합니다. 종종 이 객체가 일을 수행할 때 개발자로서 특별한 일을 시킬 수도 있습니다. 이를테면 앱을 시작하면 가장 마지막에 종료한 화면에서 시작하는 기능을 구현한다고 하면, `UIApplication`은 `didFinishLaunchingWithOptions()`을 델리게이션함으로써 앱이 처음 켜질 때, 특정한 작업을 수행할 수 있도록 합니다. 이 밖에도 다양한 **LifeCycle** 에 따라서 다양한 작업을 수행할 수 있는데, 자세한 이야기는 다른 포스트에서 이야기해보도록 하겠습니다.


##### 자, 다시 본론으로 들어오자.
위에서도 언급했던 `didFinishLaunchingWithOptions()` 함수로 가볼까요? 이 함수는 **이제 막 앱이 켜질 때, 맨 처음으로 호출되는 함수**인데, 바로 이 함수에서 `Storyboard`에서 초기화면을 연결할 때 사용했던 `Is Initial View Controller` 혹은 `Storyboard Entry Point`를 코드로 작성해보도록 하겠습니다.

##### Window
`UIWindow`는 간단하게만 언급하고 넘어가겠습니다. [UIWindow 공식문서](https://developer.apple.com/documentation/uikit/uiwindow)

**Window**는 눈으로 보여지지는 않지만, 앱의 많은 뷰들을 보이는 데에 중대한 역할을 합니다. 모든 뷰들이 바로 이 Window에서 보이게 되는 것이죠. 보이는 것 뿐만 아니라 다양한 이벤트도 핸들링합니다.

> An object that provides the backdrop for your app’s user interface and provides important event-handling behaviors.

정리해보면 이 친구는 다음과 같은 역할과 특징을 가집니다.

1. View 컴포넌트들을 표현할 영역을 제공한다.
2. 이벤트 핸들링을 제공한다.
2. 여러 개의 Window를 가질 수는 있지만(필요에 따라서), 오직 하나의 `key Window`만을 가진다.
	- 사실 하나의 Window만 만드는 것이 일반적이긴 하나, AppleTV 같이 mirror 기능이 지원되면서 외부 화면을 별도 window로 지정할 때만 복수의 Windows를 만듭니다. 여러 Window를 쓸 때는 주의가 필요합니다.

##### 자, 다시 본론으로
스토리보드를 사용하면 알아서 자동으로 `UIWindow` 객체가 정의되지만, 지금은 스토리보드를 사용하지 않으므로 `AppDelegate.swift`에 선언되어 있는 `window`를 초기화할 필요가 있습니다. 그러므로  `didFinishLaunchingWithOptions()`에서 이를 초기화해봅시다.

```swift
var window: UIWindow?

func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
        window = UIWindow(frame: UIScreen.main.bounds)
}
```
`UIScreen.main.bounds` 즉, 현재 사용하고 있는 기기의 스크린 사이즈로 window를 만듭니다.


```swift
...
let viewController = ViewController()
viewController.view.backgroundColor = UIColor.red
window!.rootViewController = viewController
...
```
그리고 앱을 개발할 때에는 각각 나뉜 viewController 파일에서 UI를 구성하지만, 이번에는 단순히 확인만 하기 위해 함수 내에서 UI를 초기화합니다. 그리고 window에 보여질 ViewController를 **rootViewController**로 연결합니다.


```swift
...
window!.makeKeyAndVisible()
...
```
마지막으로 우리가 정의한 window를 보여주고, `makeKeyAndVisible()`을 호출해 **key window**로 만듭니다.


```swift
// AppDelegate.swift
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
        self.window = UIWindow(frame: UIScreen.main.bounds)

        let viewController = ViewController()
        viewController.view.backgroundColor = UIColor.red
        window!.rootViewController = viewController
        window!.makeKeyAndVisible()
        return true
    }
```
최종코드입니다.

#### Step 4. 앱 실행하기
`Cmd + R`을 눌러 실행해봅시다.

![](../assets/documentation/2017-06-28-NotUsingStoryboard/Simulator Screen Shot 2017. 6. 28. 오후 5.37.15.png)

### 다음 포스트
사실 코드는 간단한데 글은 매우 길었습니다. 다음 포스트에서는 짧게 TabBar라던지, TableView라던지 등등 자주 사용하는 UI를 [SnapKit](https://snapkit.io/)을 이용해서 만들어보는 포스트를 쓸 예정입니다. 맞춤법을 비롯한 온갖 오타와 잘못된 부분은 [sanghoway@gmail.com](sanghoway@gmail.com) 으로 지적해주세요.
